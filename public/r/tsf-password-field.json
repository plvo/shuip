{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "tsf-password-field",
  "type": "registry:ui",
  "dependencies": ["@tanstack/react-form", "lucide-react"],
  "registryDependencies": ["field", "input-group", "tooltip"],
  "files": [
    {
      "path": "./registry/ui/tsf-password-field.tsx",
      "content": "'use client';\n\nimport type {\n  DeepKeys,\n  DeepValue,\n  FieldAsyncValidateOrFn,\n  FieldOptions,\n  FieldValidateOrFn,\n  FormAsyncValidateOrFn,\n  FormValidateOrFn,\n  ReactFormApi,\n} from '@tanstack/react-form';\nimport { Eye, EyeOff, InfoIcon } from 'lucide-react';\nimport React from 'react';\nimport { Field, FieldDescription, FieldError, FieldLabel } from '@/components/ui/field';\nimport { InputGroup, InputGroupAddon, InputGroupButton, InputGroupInput } from '@/components/ui/input-group';\nimport { Tooltip, TooltipContent, TooltipTrigger } from '@/components/ui/tooltip';\n\nexport interface PasswordFieldProps<\n  TFormData,\n  TName extends DeepKeys<TFormData>,\n  TData extends DeepValue<TFormData, TName>,\n> {\n  form: ReactFormApi<\n    TFormData,\n    undefined | FormValidateOrFn<TFormData>,\n    undefined | FormValidateOrFn<TFormData>,\n    undefined | FormAsyncValidateOrFn<TFormData>,\n    undefined | FormValidateOrFn<TFormData>,\n    undefined | FormAsyncValidateOrFn<TFormData>,\n    undefined | FormValidateOrFn<TFormData>,\n    undefined | FormAsyncValidateOrFn<TFormData>,\n    undefined | FormValidateOrFn<TFormData>,\n    undefined | FormAsyncValidateOrFn<TFormData>,\n    undefined | FormAsyncValidateOrFn<TFormData>,\n    any\n  >;\n  name: TName;\n  label?: string;\n  description?: string;\n  formProps?: Partial<\n    FieldOptions<\n      TFormData,\n      TName,\n      TData,\n      undefined | FieldValidateOrFn<TFormData, TName, TData>,\n      undefined | FieldValidateOrFn<TFormData, TName, TData>,\n      undefined | FieldAsyncValidateOrFn<TFormData, TName, TData>,\n      undefined | FieldValidateOrFn<TFormData, TName, TData>,\n      undefined | FieldAsyncValidateOrFn<TFormData, TName, TData>,\n      undefined | FieldValidateOrFn<TFormData, TName, TData>,\n      undefined | FieldAsyncValidateOrFn<TFormData, TName, TData>,\n      undefined | FieldValidateOrFn<TFormData, TName, TData>,\n      undefined | FieldAsyncValidateOrFn<TFormData, TName, TData>\n    >\n  >;\n  fieldProps?: React.ComponentProps<typeof Field>;\n  props?: React.ComponentProps<'input'>;\n  tooltip?: React.ReactNode;\n}\n\nexport function PasswordField<TFormData, TName extends DeepKeys<TFormData>, TData extends DeepValue<TFormData, TName>>({\n  form,\n  name,\n  label,\n  description,\n  formProps,\n  fieldProps,\n  props,\n  tooltip,\n}: PasswordFieldProps<TFormData, TName, TData>) {\n  const [showPassword, setShowPassword] = React.useState(false);\n\n  const handleTogglePassword = React.useCallback(() => {\n    setShowPassword((prev) => !prev);\n  }, []);\n\n  return (\n    <form.Field name={name} {...formProps}>\n      {(field) => {\n        const { isValid, errors } = field.state.meta;\n\n        return (\n          <Field className='gap-2' data-invalid={!isValid} {...fieldProps}>\n            {label && <FieldLabel>{label}</FieldLabel>}\n            <InputGroup>\n              <InputGroupInput\n                type={showPassword ? 'text' : 'password'}\n                placeholder='Enter password'\n                name={field.name}\n                value={field.state.value as string}\n                onChange={(e) => field.handleChange(e.target.value as TData)}\n                onBlur={field.handleBlur}\n                aria-invalid={!isValid}\n                {...props}\n              />\n              <InputGroupAddon align='inline-end'>\n                <InputGroupButton aria-label='Toggle password' onClick={handleTogglePassword}>\n                  {showPassword ? <EyeOff className='size-4' /> : <Eye className='size-4' />}\n                </InputGroupButton>\n\n                {tooltip && (\n                  <Tooltip>\n                    <TooltipTrigger asChild>\n                      <InputGroupButton aria-label='Info' size='icon-xs'>\n                        <InfoIcon />\n                      </InputGroupButton>\n                    </TooltipTrigger>\n                    <TooltipContent>{tooltip}</TooltipContent>\n                  </Tooltip>\n                )}\n              </InputGroupAddon>\n            </InputGroup>\n            {!isValid && (\n              <FieldError className='text-xs text-left' errors={errors.map((error) => ({ message: error }))} />\n            )}\n            {description && <FieldDescription className='text-xs'>{description}</FieldDescription>}\n          </Field>\n        );\n      }}\n    </form.Field>\n  );\n}\n",
      "type": "registry:ui",
      "target": "./components/ui/shuip/tanstack-form/password-field.tsx"
    }
  ]
}
